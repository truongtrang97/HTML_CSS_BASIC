(self.wpJsonpPcmallFlashsale=self.wpJsonpPcmallFlashsale||[]).push([[287],{694:function(e,t,a){"use strict";var r=a(3804),s=a.n(r),l=a(6704),n=a(2361),o=a(7762),i=a(6263),c=a(4217),m=a(8448);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}t.Z=function(e){var t=s().forwardRef((function(t,a){var d=(0,r.useContext)(o.InjectReducerContext).injectAsyncReducer;return(0,i.u)((function(){d({flashSale:c.g0,sMartFlashSaleReducer:m.XY})}),[d,c.g0,m.XY]),s().createElement(n.Z,{onTrack:l.Tracking.onTrack},s().createElement(e,_({},t,{ref:a})))})),a=function(e){return e.displayName||e.name||"Component"}(t);return t.displayName="WithFlashSaleWrap("+a+")",t}},4925:function(e,t,a){"use strict";a.d(t,{Z:function(){return G}});var r=a(3804),s=a.n(r),l=a(8997),n=a.n(l),o=a(5042),i=a(6704),c=a(8523),m=a(53),_=i.I18n.t,d=(0,i.I18n.withI18nCollections)([c.L,c.GC])((function(e){var t=e.sold,a=e.total,s=e.soldOutTime,l=void 0===s?0:s,o=e.startTime,i=void 0===o?0:o,c=e.layout,m=100*(a-t)/a,d=Math.ceil(Math.floor(2*m)/2),u=0===a||t===a,p=u?Math.floor((l-i)/3600):null,f=u&&0===p?l-i<60?1:Math.floor((l-i)/60)%60:null;return u?r.createElement("div",{className:n()("flash-sale-sold-out","flash-sale-sold-out--"+c)},f?1===f?_("label_amount_sold_out_in_1_min",{amount:a}):_("label_amount_sold_out_in_n_mins",{minutes:f,amount:a}):p?1===p?_("label_amount_sold_out_in_1_hour",{hours:1,amount:a}):_("label_amount_sold_out_in_n_hours",{hours:p,amount:a}):null):r.createElement("div",{className:"flash-sale-progress-bar__wrapper flash-sale-progress-bar__wrapper--"+c},r.createElement("div",{className:n()("flash-sale-progress-bar","flash-sale-progress-bar--"+c)},r.createElement("div",{className:n()("flash-sale-progress-bar__text","flash-sale-progress-bar__text--"+c,{"flash-sale-progress-bar__text--selling-fast":d<=15})},d>15?_("label_n_sold_flash_sale",{count:t>0?t:0}):_("label_selling_fast")),r.createElement("div",{className:n()("flash-sale-progress-bar__complement-wrapper","flash-sale-progress-bar__complement-wrapper--"+c)},r.createElement("div",{className:n()("flash-sale-progress-bar__complement-sizer","flash-sale-progress-bar__complement-sizer--"+c),style:{width:d+"%"}},r.createElement("div",{className:"flash-sale-progress-bar__complement-color"}))),m<=50&&r.createElement("div",{className:"flash-sale-progress-bar__fire"})))})),u=a(5915),p=a(1809),f=(0,a(5035).S)((0,p.of)()),h=u.LU.bind(null,u.x5[f]),g=function(e,t){var a=new Date(1e3*t),r=new Date(1e3*e),s=(0,u.IS)("minute",a,r);return h(a,r,{totalUnits:1,endUnit:"minute",roundLast:s>60?"floor":s<1?"ceil":"round",unitLowerBounds:{year:Number.MAX_VALUE,month:Number.MAX_VALUE,week:Number.MAX_VALUE,day:Number.MAX_VALUE}})},v=a(3545),E=a(3984),y=["trackingClick","to","history"],b=["targetType"];function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var a,r,s={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(s[a]=e[a]);return s}function k(e,t,a,r){return function(s){e(),s&&s.stopPropagation(),s&&s.preventDefault(),r?window.location.href=t:a.push(t)}}function O(e){var t=e.trackingClick,a=e.to,s=e.history,l=N(e,y);return r.createElement("div",{onClick:k(t,a,s,"string"==typeof a&&/^http/.test(a))},l.children)}function C(e){var t=e.targetType,a=N(e,b),s=(0,E.Z)(t,{to:a.to});return r.createElement(O,w({trackingClick:s},a))}var A=a(980),x=a(4233),L=a(8312),I=a(4251),S=a(6219),T=a(9904),P=a(2088);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=i.I18n.t,D=i.I18n.withI18nCollections,j=i.Env.getLocale(),F={IN:"hot_deals",default:"flash_sale"},H=F[j]||F.default,B=function(e){var t,a;function r(t){var a;return(a=e.call(this,t)||this).rootElement=null,a}a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,M(t,a);var l=r.prototype;return l.componentDidMount=function(){var e=this.props,t=e.item,a=e.isOngoing,r=t.flash_sale_stock,s=t.stock,l=r-s;a&&window.Sentry&&t&&l&&l<0&&window.Sentry.captureMessage("Flash Sale sold out count is negative\n        promotionid: "+t.promotionid+"\n        itemid: "+t.itemid+"\n        flash_sale_stock:"+s+"\n        stock:"+r+"\n        sold(flash_sale_stock-stock): "+l+",","error")},l.shouldComponentUpdate=function(e){return this.props.item.itemid!==e.item.itemid||this.props.item.promotionid!==e.item.promotionid},l.render=function(){var e=this,t=this.props,a=t.item,r=t.layout,l=t.overwriteCardLink,i=t.displayFlashSaleProgressBar,c=t.setShowDiscountBadge,_=t.isPlaceholder,u=t.isOngoing,p=t.toTrack,f=t.isDP,h=t.position,E=t.history,y=t.recommendation_info;if(_&&"home-page"===r)return s().createElement("div",{className:n()("flash-sale-item-card","flash-sale-item-card--home-page")},s().createElement("div",{className:n()("flash-sale-item-card__image","flash-sale-item-card__image--home-page")},s().createElement(m.p,{className:"flash-sale-item-card-placeholder__image"})),s().createElement("div",{className:n()("flash-sale-item-card__lower-wrapper","flash-sale-item-card__lower-wrapper--home-page")},s().createElement("div",{className:"skeleton-full"},s().createElement("div",{className:"center skeleton-full",style:{height:26}},s().createElement("div",{className:"skeleton skeleton-medium skeleton-line"})),s().createElement("div",{className:"center skeleton-full",style:{height:16}},s().createElement("div",{className:"skeleton skeleton-full skeleton-line"})))));var b=u,w=b&&(0===a.stock||0===a.flash_sale_stock||a.is_soldout),N=a.raw_discount,k=(0,o.Jn)(a.promo_images&&a.promo_images.length>0?a.promo_images[0]:a.image,!0),O=function(e,t){if(e){var a="TW"===__LOCALE__?(100-e.extra_discount)/10:e.extra_discount,r="";if(e.end_time&&e.start_time&&(r=g(e.start_time,e.end_time)),e&&"function"==typeof t)return r?t("fs_extra_n_off_applied_for_first_m_in_x",{n:a,m:e.extra_discount_stock,x:r}):t("fs_extra_n_off_applied_for_first_m",{n:a,m:e.extra_discount_stock})}return""}(a.extra_discount_info,U),I=r===P.HS.LANDING_PAGE||r===P.HS.MART_LANDING_PAGE,M=!!O&&I,D=a.hidden_price_display,F=!!a&&!!a.shopid&&!!a.itemid,B=l||(F?w?S.xW.getUrl({seoName:a.name,shopId:a.shopid,itemId:a.itemid,from:H,promotionid:a.promotionid}):(0,x.O)(a.shopid,a.itemid,a.name):""),G={isDP:f,toTrack:p,item:a,position:h,isOngoing:u,recommendation_info:y};return F?s().createElement("div",{ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){e.rootElement=t,e.props.trackingRef&&e.props.trackingRef(t)})),onClick:function(){e.props.trackingClick&&e.props.trackingClick()},className:n()("flash-sale-item-card","flash-sale-item-card--"+r.replace("_","-").toLowerCase(),"flash-sale-item-card--"+__LOCALE__,{"flash-sale-item-card--sold-out":w})},s().createElement(A.Z,{className:"flash-sale-item-card-link",to:B},s().createElement("div",{className:n()("flash-sale-item-card__image","flash-sale-item-card__image--"+r)},w&&s().createElement(v.VL,null),a.promo_overlay_image&&s().createElement(m.p,{src:(0,o.Jn)(a.promo_overlay_image,!0),className:n()("flash-sale-item-card__image-overlay","flash-sale-item-card__image-overlay--"+r),imageServerWidthOperator:320}),s().createElement(m.p,{className:"flash-sale-item-card__animated-image",src:k,imageServerWidthOperator:320})),I&&s().createElement("div",{className:n()("flash-sale-item-card__item-name",!O&&"flash-sale-item-card__item-name-extra-discount")},s().createElement("div",{className:O?"flash-sale-item-card__item-name-box-extra-discount":"flash-sale-item-card__item-name-box",title:a.promo_name||a.name},a.promo_name||a.name)),M&&s().createElement("div",{className:"flash-sale-item-card__extra-discount-label"},O),(I||!u&&r===P.HS.MART_HOME_PAGE)&&a.price_before_discount!==a.price&&s().createElement("div",{className:n()("flash-sale-item-card__original-price","flash-sale-item-card__original-price--"+r)},s().createElement(T.qR,{locale:j,price:a.price_before_discount,layout:r,type:P.g8.PRICE_BEFORE_DISCOUNT})),s().createElement("div",{className:n()("flash-sale-item-card__lower-wrapper","flash-sale-item-card__lower-wrapper--"+__LOCALE__,"flash-sale-item-card__lower-wrapper--"+r,!b&&"flash-sale-item-card__lower-wrapper--"+r+"__coming-soon")},s().createElement("div",{className:"flash-sale-item-card__lower-left"},s().createElement("div",{className:n()("flash-sale-item-card__current-price","flash-sale-item-card__current-price--"+r,!b&&"flash-sale-item-card__current-price--"+r+"__coming-soon")},s().createElement(T.qR,{locale:j,price:a.price,hiddenPrice:D,layout:r,type:a.price?P.g8.CURRENT_PRICE:P.g8.HIDDEN_PRICE})),i&&s().createElement(d,{sold:a.flash_sale_stock-a.stock,total:a.flash_sale_stock,soldOutTime:a.end_time,startTime:a.start_time,layout:r})),s().createElement("div",{className:"flash-sale-item-card__lower-right"},!w&&I&&b&&s().createElement(C,R({},G,{targetType:"BuyNowButton",to:B,history:E}),s().createElement("div",{className:n()("flash-sale-item-card__buy-now-button","flash-sale-item-card__buy-now-button--"+r)},U("label_buy_now_flash_sale"))),(I||r===P.HS.MART_HOME_PAGE)&&!b&&s().createElement(C,R({},G,{targetType:"ViewDetailsButton",to:B,history:E}),s().createElement("div",{className:n()("flash-sale-item-card__view-details-button","flash-sale-item-card__view-details-button--"+r)},U("label_btn_view_details")))),c&&!!N&&u&&s().createElement("div",{className:n()("shopee-item-card__badge-wrapper","shopee-fs-item-card__badge-wrapper","shopee-fs-item-card__badge-wrapper--"+r)},s().createElement(v.OO,{rawDiscount:N,language:L.UA,key:"badge-promotion",offText:U("pr_badge_label_off")}))))):null},r}(r.Component),G=D([c.x7,c.L])((0,I.Z)(B,"FlashSaleItemCard"))},4233:function(e,t,a){"use strict";a.d(t,{O:function(){return s}});var r=a(9373);function s(e,t,a){return a?r.Z.getUrl({seoName:a,shopId:e,itemId:t}):r.O.getUrl({shopId:e,itemId:t})}},8312:function(e,t,a){"use strict";a.d(t,{UA:function(){return l},se:function(){return o}});var r=a(1809),s=a(7143),l=(0,r.of)(),n=(0,s.pO)(__LOCALE__),o=(n.language,n.languages,n.countryName,n.currency);n.adultAge,s.H0[__LOCALE__]},8610:function(e,t,a){var r=a(6704).FetchUtils;e.exports=r}}]);